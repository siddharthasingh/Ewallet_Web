machine:
  java:
    version: openjdk7
dependencies:
  override:
    - mvn --fail-never dependency:go-offline || true
    - ifconfig
test:
  override:
    - mvn integration-test -Dmaven.test.failure.ignore=true
general:
  artifacts:
    - "target/*.war" # relative to the build directory
compile:
  override:
    - mvn clean install -Dmaven.test.skip=true -Pproduction
  post:
    - mkdir $CIRCLE_ARTIFACTS/Ewallet
    - mv target/*.war $CIRCLE_ARTIFACTS/Ewallet
deployment:
  staging:
    branch: master
    codedeploy:
      my-app:
        deployment_group: ewallet



